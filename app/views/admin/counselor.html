<div class="history-container">
    <a class="return-btn" href="javascript:history.go(-1)">
        <i class="ALiconfont icon-sortleft"></i>
        返回
    </a>
    <ul class="history-list">
        <li><a href="#index" ng-click="routerInit('admin')">系统设置</a></li>
        <li><a href="#index">帐号管理</a></li>
        <li>辅导员</li>
    </ul>
</div>
<!--<div class="tool-bar">
    <div ng-if="menuCheck(486)">
        <button class="btn btn-success" ng-click="showCard('#userForm',dataInit)">新建帐号</button>
    </div>
</div>-->
<div class="page-main page-account" style="top:50px;">
    <div class="page-tree" tree>
        <ul>
            <li class="open">
                <a ng-class="{'branch':treeCollege[0].collegeList,'leaf':!treeCollege[0].collegeList}" ng-click="show(0,treeCollege[0])">{{treeCollege[0].name}}</a>
                <ul ng-show="treeCollege[0].collegeList">
                    <li class="" ng-repeat="college in treeCollege[0].collegeList||[]">
                        <a ng-click="show(1,college)" ng-class="{'branch':college.classList,'leaf':!college.classList}">{{college.collegeName}}</a>
                        <ul ng-show="college.classList">
                            <li ng-repeat="cla in college.classList||[]">
                                <a ng-click="show(2,cla,college)" class="leaf">{{cla.className}}</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="page-tabs" tabs style="left:225px">
        <ul class="page-tabs-nav">
            <li class="active" ng-click="media.setTab(1)">账号列表</li>
            <li ng-show="menuCheck(488)" ng-click="media.setTab(2)">账号批量导入</li>
        </ul>

         <ul class="page-tabs-container">
            <li class="fadeIn animated active" ng-class="{'active':media.tab == 1}">
                <div class="accountList">
                    <div ng-if="menuCheck(486)" class="xzbtn" style="padding: 10px 10px 0 0;">
                        <button class="btn btn-success" ng-click="showCard('#userForm',adddataInit)">新建帐号</button>
                        <form class="search-bool" style="max-width: 300px; float:right;">
                            <div class="input-group ng-pristine ng-valid">
                                <input type="text" class="form-control ng-pristine ng-untouched ng-valid" placeholder="姓名/账号" name="code" value="" ng-model="media.keyword">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" ng-click="searchBtn()">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                    <div class="table-container" style="left:0;bottom:54px; top:55px; background:#fff;">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>帐号</th>
                                    <th>角色</th>
                                    <th>姓名</th>
                                    <th>工号</th>
                                    <th>管理班级</th>
                                    <th ng-if="menuCheck(487)">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in list">
                                    <td style="vertical-align:middle">{{item.userAccount}}</td>
                                    <td style="vertical-align:middle">{{item.roleName}}</td>
                                    <td style="vertical-align:middle">{{item.userName}}</td>
                                    <td style="vertical-align:middle">{{item.jobNumber}}</td>
                                    <td style="vertical-align:middle">
                                        <ul>
                                            <li ng-repeat="cla in item.classList">
                                                {{cla.collegename}}-
                                                <span ng-if="cla.classname.length>0">{{cla.classname[0]}}</span>
                                                <span ng-if="cla.classname.length>1">,{{cla.classname[1]}}</span>
                                                <span ng-if="cla.classname.length>2">等共{{cla.classcount}}个班级</span>
                                            </li>
                                        </ul>
                                    </td>
                                    <td ng-if="menuCheck(487)" style="vertical-align:middle">
                                        <button type="button" class="btn btn-link btn-xs" ng-click="showCard('#userForm',dataInit(item))">编辑</button>
                                        <button type="button" class="btn btn-link btn-xs" ng-click="showCard('#userFormPsw',dataInit(item))">重置密码</button>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="10" ng-hide="media.recordCount" class="empty">没有检索到相关管理员</td>
                                </tr>
                            </tfoot>
                        </table>
                        
                    </div>
                    <div class="page-controller">
                        <div class="page-number">
                            <ul class="pagination">
                                <li ng-class="{disabled:media.epage<2}">
                                    <a aria-label="Previous" ng-click="setPage(-1)">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li ng-show="media.epage-2>0"><a ng-click="setPage(-2)">{{media.epage-2}}</a></li>
                                <li ng-show="media.epage-1>0"><a ng-click="setPage(-1)">{{media.epage-1}}</a></li>
                                <li class="active"><a>{{media.epage}}</a></li>
                                <li ng-show="media.epage+1<=media.pageCount"><a ng-click="setPage(1)">{{media.epage+1}}</a></li>
                                <li ng-show="media.epage+2<=media.pageCount"><a ng-click="setPage(2)">{{media.epage+2}}</a></li>
                                <li ng-class="{disabled:media.epage>=media.pageCount}">
                                    <a aria-label="Next" ng-click="setPage(1)">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="page-size">
                            共{{media.recordCount}}条记录，每页显示
                            <div class="btn-group dropup">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    {{media.pagesize}} <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" style="min-width:54px">
                                    <li ng-click="setPageSize(10)"><a>10</a></li>
                                    <li ng-click="setPageSize(20)"><a>20</a></li>
                                    <li ng-click="setPageSize(30)"><a>30</a></li>
                                    <li ng-click="setPageSize(50)"><a>50</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </li>

            <li class="fadeIn animated" ng-class="{'active':media.tab == 2}" style="height: 99.5%;">
                <div class="accountBatch">
                    <iframe name="page-frame" frameborder="0" width="100%" height="100%" frame-load></iframe>
                </div>
            </li>
         </ul>
    </div>

</div>

<div class="info-card fadeIn animated" id="userFormPsw" info-card data-userid = "form.status">
    <div class="info-card-wrapper">
        <div class="info-card-dialog">
            <div class="info-card-content">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        重置密码
                        <a class="info-card-close"><i class="ALiconfont icon-close"></i></a>
                    </div>
                    <div class="panel-body">
                        <table class="table-form table-bordered bg-white">
                            <tbody>
                                 <tr>
                                    <td class="require">新密码</td>
                                    <td><input type="text" ng-model="form.newpassword"/></td>
                                </tr>
                                <tr>
                                    <td class="require">确认密码</td>
                                    <td><input type="text" ng-model="form.renewpassword"/></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="td-btn-box">
                                        <a ng-if="menuCheck(233)" class="btn btn-success" ng-click="resetSave(closeCard())">确认修改</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="info-card fadeIn animated" id="userForm" info-card data-userid = "form.status">
    <div class="info-card-wrapper">
        <div class="info-card-dialog">
            <div class="info-card-content">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        {{form.status?'编辑帐号':'新增帐号'}}
                        <a class="info-card-close"><i class="ALiconfont icon-close"></i></a>
                    </div>
                    <div class="panel-body">
                        <table class="table-form table-bordered bg-white">
                            <tbody>
                                <tr>
                                    <td class="require">工号</td>
                                    <td><input type="text" ng-model="form.jobnumber" /></td>
                                </tr>
                                <tr>
                                    <td class="require">姓名</td>
                                    <td><input type="text" ng-model="form.username" /></td>
                                </tr>
                                <tr>
                                    <td class="require">联系方式</td>
                                    <td><input type="text" ng-model="form.phone" /></td>
                                </tr>
                                <tr>
                                    <td class="require">班级</td>
                                    <td>
                                        <ul>    
                                            <li ng-repeat="cla in form.classes" class="clearfix">
                                                <select class="form-control add-select" style="" ng-change="selecter.collegeSelecter(cla)" ng-model="cla.collegeId">
                                                    <option value="">选择学院</option>
                                                    <option ng-repeat="college in treeCollege[0].collegeList"  value="{{college.collegeId}}">{{college.collegeName}}</option>
                                                </select>
                                                <!--<select class="form-control" ng-model="cla.classId">
                                                    <option value="">{{form.classnames ? form.classnames : "选择班级"}}</option>
                                                    <option value="1" ng-if="cla.classList!=null && cla.classList.length>0">全部班级</option>
                                                    <option ng-repeat="item in cla.classList" value="{{item.classId}}">{{item.className}}</option>
                                                </select>-->
                                                
                                                
                                                <div class="dropdown" style="float: left;">
                                                    <button class="btn btn-default claBtn" ng-click="cla.showClassMenu=!cla.showClassMenu">
                                                        <span style="padding-right:10px;">{{cla.text ? cla.text : "选择班级"}}</span>
                                                        <span class="caret" style="position: absolute;top: 12px;right: 5px;"></span>
                                                    </button>
                                                    <ul class="dropdownmenuClass" ng-show="cla.showClassMenu" >
                                                        <li value=""><label><input type="checkbox" ng-model="cla.checkedAll" ng-click="form.classCheckAll(cla)">全部班级</label></li>
                                                        <li ng-repeat="item in cla.classList">
                                                            <label>
                                                                <input class="chkbox" type="checkbox" ng-model="item.checked" ng-click="form.classCheckEvent(cla)">{{item.className}}
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </div>
                                                
                                                <a ng-if="form.classes.length>1" class="remove-flat" ng-click="form.removeClass($index)"><i class="ALiconfont icon-close1"></i></a>
                                            </li>
                                            <li style="padding-top:5px"><a class="btn btn-href btn-xs" ng-click="form.addClass('', '', 1)">新增班级</a></li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="require">角色</td>
                                    <td>
                                        <select class="add-select" ng-model="form.roleid">
                                            <option value="">请选择角色</option>
                                            <option ng-repeat="role in roles || []" value="{{role.roleId}}" ng-selected="form.roleid == role.roleId">{{role.title}}</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="require">帐号</td>
                                    <td><input type="text" ng-disabled="form.status" ng-model="form.useraccount" /></td>
                                </tr>
                                <tr ng-hide="form.status">
                                    <td class="require">密码</td>
                                    <td><input type="password" ng-model="form.password" /></td>
                                </tr>
                                <tr ng-hide="form.status">
                                    <td class="require">确认密码</td>
                                    <td><input type="password" ng-model="form.password1" /></td>
                                </tr>
                                <tr>
                                    <td class="require">在学生信息卡显示</td>
                                    <td><input bs-switch ng-model="form.isshow" type="checkbox" switch-size="mini" switch-on-text="开启" switch-off-text="关闭"></td>
                                </tr>
                                
                                <tr>
                                    <td></td>
                                    <td class="td-btn-box">
                                        <a ng-if="menuCheck(486)" ng-hide="form.status" class="btn btn-success" ng-click="addSave(closeCard())">提交</a>
                                        <a ng-if="menuCheck(487)" ng-show="form.status" class="btn btn-primary" ng-click="editSave(closeCard())">保存</a>
                                        <a ng-if="menuCheck(491)" ng-show="form.status" class="btn btn-danger" ng-click="deletess(closeCard())">删除</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>